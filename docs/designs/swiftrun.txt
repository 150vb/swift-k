Swiftrun
========

:toc:
:icons:

Introduction
------------
Swift 0.95 introduces many changes to the method for configuring and running
Swift. The goal of these changes is to make configuration easier for Swift
users. This document will attempt to explain the reasons for these changes and
document how these new configuration mechanisms work.

Configuration in previous releases
----------------------------------
In Swift 0.94 and earlier versions, configuring Swift usually required setting
up files called sites.xml, tc.data, and cf. These files typically needed to be
specified on the command line. The following command line was pretty typical 
in previous Swift releases:

-----
$ swift -sites.file sites.xml -tc.file tc.data -config cf myscript.swift
-----

sites.xml
~~~~~~~~~
The sites.xml file was an XML configuration file that defined site paramaters.
It was used to determine how Swift should interact with the scheduler. Below
is an example sites.xml for a campus cluster called midway

.sites.xml
-----
<config>
  <pool handle="midway-sandyb">
    <execution provider="coaster" jobmanager="local:slurm"/>
    <profile namespace="globus" key="jobsPerNode">16</profile>
    <profile namespace="globus" key="maxWalltime">_WALLTIME_</profile>
    <profile namespace="globus" key="highOverAllocation">100</profile>
    <profile namespace="globus" key="lowOverAllocation">100</profile>
    <profile namespace="globus" key="queue">sandyb</profile>
    <profile namespace="karajan" key="initialScore">10000</profile>
    <filesystem provider="local"/>
    <workdirectory>/scratch/midway/{env.USER}</workdirectory>
  </pool>
</config>
-----

tc.data
~~~~~~~~
The tc.data was a basic catalog that defined the location of applications on a
given sites.

.tc.data
-----
localhost  cat  /bin/cat null null null
-----

cf
~~
The cf file (also called swift.properties) was a file that defined various 
swift configuration values, like retries and error handlinng.

.cf
-----
wrapperlog.always.transfer=true
sitedir.keep=true
file.gc.enabled=false
status.mode=provider
-----

The new swift.properties
------------------------
Previous versions of Swift required users to create multiple files, each in
stored in a different format. In an attempt to make things easier, Swift 0.95
merges these different configuration files into a single, common configuration
file called swift.properties.

The new swift.properties file is responsible for:

1. Defining sites
2. Defining applications
3. Defining various swift settings

Here is an example of a new swift.properties file:

-----
wrapperlog.always.transfer=true
sitedir.keep=true
file.gc.enabled=false
status.mode=provider
site=westmere
site.westmere.provider=local:slurm
site.westmere.jobsPerNode=12
site.westmere.maxWalltime=00:05:00
site.westmere.queue=westmere
site.westmere.initialScore=10000
site.westmere.filesystem=local
site.westmere.workdirectory=/scratch/midway/davidkelly999
app.westmere.cat=/bin/cat
-----

This single swift.properties file works identically to using the sites.xml,
tc.data, and cf files listed in the previous section.
