<project name="service" default="help">

	<property file="service.properties"/>
	<property file="project.properties"/>
	
	<property name="axis.lib.dir" value="${axis.dir}/WEB-INF/lib"/>
	<property name="dist.dir" value="dist/${module.name}-${version}"/>
	<property name="dist.lib.dir" value="${dist.dir}/lib"/>
	
	<path id="classpath">
		<fileset dir="${dist.lib.dir}">
			<include name="*.jar"/>
		</fileset>
		<fileset dir="lib">
			<include name="*.jar"/>
		</fileset>
	</path>

	<target name="help">
		<echo>
Be sure to edit the service.properties file.

Targets:
	deploy 		- deploys the web service
	undeploy	- undeploys the web service
	copy 		- copies the required files to the axis lib directory
	help		- you are looking at it
		</echo>
	</target>
	
	<target name="copy">
		<ant antfile="build.xml" target="dist" inheritAll="false"/>
		<copy todir="${axis.lib.dir}">
			<fileset dir="${dist.lib.dir}" includes="*.jar" excludes="axis*.jar,jaxrpc*.jar"/>
		</copy>
	</target>
	
	<target name="deploy" depends="copy">
		<java classname="org.apache.axis.client.AdminClient"
			classpathref="classpath" fork="yes">
			<arg value="-l${axis.url}"/>
			<arg value="resources/karajan-deploy.wsdd"/>
		</java>
	</target>
	<target name="undeploy">
		<java classname="org.apache.axis.client.AdminClient"
			classpathref="classpath" fork="yes">
			<arg value="-l${axis.url}"/>
			<arg value="resources/karajan-undeploy.wsdd"/>
		</java>
	</target>
</project>
